{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}
{% block title %}{{ accommodation.name }} | Premium Stay{% endblock %}

{% block content %}
<div class="bg-[#020617] min-h-screen text-slate-300 font-sans selection:bg-indigo-500/30">
    <div class="max-w-7xl mx-auto px-6 py-12 lg:py-20 grid grid-cols-1 lg:grid-cols-12 gap-16">
        
        <div class="lg:col-span-7 space-y-8">
            <div class="rounded-[48px] overflow-hidden border border-slate-800 shadow-2xl group relative">
                <img src="{% if accommodation.image %}{{ accommodation.image.url }}{% else %}{{ accommodation.image_url }}{% endif %}" 
                     class="w-full h-[500px] object-cover transition duration-700 group-hover:scale-105">
                <div class="absolute inset-0 bg-gradient-to-t from-[#020617] via-transparent to-transparent opacity-60"></div>
            </div>

            {% if accommodation.tiktok_url %}
            <div class="bg-slate-900/60 border border-pink-500/20 p-8 rounded-[40px] flex items-center justify-between backdrop-blur-xl hover:border-pink-500/50 transition-all group">
                <div class="flex items-center gap-6">
                    <div class="bg-gradient-to-tr from-pink-600 to-purple-600 p-5 rounded-3xl shadow-lg shadow-pink-600/20 animate-pulse">
                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.06-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.03 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.28-2.26.54-4.5 2.1-6.11 1.55-1.67 3.81-2.58 6.07-2.48.01 1.57.01 3.13.01 4.7-.83-.23-1.72-.25-2.55.05-1.21.43-2.14 1.51-2.42 2.76-.32 1.28-.01 2.68.81 3.71.74.96 1.88 1.58 3.09 1.61 1.28.06 2.58-.46 3.39-1.46.7-.84.97-1.93.97-2.99V.02z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-white font-black text-xl tracking-tight">Experience the Tour</h3>
                        <p class="text-slate-500 text-sm">Watch the full video walkthrough on TikTok</p>
                    </div>
                </div>
                <a href="{{ accommodation.tiktok_url }}" target="_blank" 
                   class="bg-white text-black hover:bg-pink-600 hover:text-white px-8 py-4 rounded-2xl font-black transition-all uppercase text-sm tracking-widest shadow-xl">
                    Open TikTok
                </a>
            </div>
            {% endif %}
        </div>

        <div class="lg:col-span-5">
            <div class="sticky top-12">
                <nav class="flex items-center gap-2 text-indigo-400 text-xs font-black uppercase tracking-[0.3em] mb-6">
                    <span>{{ accommodation.country }}</span>
                    <span class="w-1 h-1 bg-slate-700 rounded-full"></span>
                    <span>{{ accommodation.city }}</span>
                </nav>
                
                <h1 class="text-5xl md:text-7xl font-black text-white mb-8 leading-[0.9] tracking-tighter">
                    {{ accommodation.name }}
                </h1>
                
                <div class="flex gap-1 text-yellow-500 mb-8">
                    {% for i in "12345"|make_list %}
                        {% if forloop.counter <= accommodation.stars %}★{% else %}<span class="opacity-20">★</span>{% endif %}
                    {% endfor %}
                </div>

                <p class="text-slate-400 text-lg leading-relaxed mb-12 border-l-2 border-slate-800 pl-6">
                    {{ accommodation.description }}
                </p>

                <div class="bg-slate-900/50 p-10 rounded-[48px] border border-slate-800 backdrop-blur-md shadow-3xl">
                    <div class="flex justify-between items-end mb-10">
                        <div>
                            <span class="text-slate-500 text-[10px] uppercase font-bold tracking-widest">Pricing Model</span>
                            <div class="text-5xl font-black text-white mt-2">
                                <span class="text-xl text-indigo-500 align-top mt-2">{{ accommodation.currency }}</span>
                                {{ accommodation.price_per_night|floatformat:0 }}
                            </div>
                        </div>
                        <div class="text-slate-500 font-bold uppercase text-[10px] tracking-widest mb-2">Per Night</div>
                    </div>
                    
                    <a href="{% url 'hotel:book_hotel' accommodation.pk %}" 
                       class="block w-full text-center {% if accommodation.source == 'travelpayouts' %}bg-indigo-600 hover:bg-indigo-500{% else %}bg-emerald-600 hover:bg-emerald-500{% endif %} text-white font-black py-6 rounded-3xl transition-all shadow-2xl shadow-indigo-600/20 transform hover:-translate-y-1">
                        {% if accommodation.source == 'travelpayouts' %}
                            SECURE INSTANT BOOKING
                        {% else %}
                            WHATSAPP RESERVATION
                        {% endif %}
                    </a>
                    
                    <p class="text-[10px] text-slate-600 mt-6 text-center uppercase tracking-widest font-bold">
                        Verified Listing • Secure Protocol
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}